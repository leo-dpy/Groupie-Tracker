<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Détails artiste</title>
    <link rel="icon" type="image/png" href="/image/favicon.png" />
    <link rel="stylesheet" href="/css/styles.css?v=2" />
  </head>
  <body>
    <header>
      <div class="contenu-entete">
        <h1 id="titre-artiste">{{.Name}}</h1>
        <nav class="bandeau" aria-label="Navigation principale">
          <a class="btn" href="/">Menu</a>
          <a class="btn" href="/library">Bibliothèque</a>
          <form action="/search" method="GET" style="display: inline-block">
            <input
              name="q"
              class="search-input"
              type="search"
              placeholder="Rechercher un artiste…"
            />
          </form>
        </nav>
      </div>
    </header>
    <main>
      <section id="details" class="bloc">
        <div class="details-flex">
          <div class="details-img-col">
            <img src="{{.Image}}" alt="{{.Name}}" class="img-responsive" />
          </div>
          <div class="details-info-col">
            <h2>Informations</h2>
            <p><strong>Date de création:</strong> {{.CreationDate}}</p>
            <p><strong>Premier album:</strong> {{.FirstAlbum}}</p>

            <h3>Membres</h3>
            <ul class="membres-list">
              {{range .Members}}
              <li>{{.}}</li>
              {{end}}
            </ul>
          </div>
        </div>

        <div class="concerts-section">
          <h3>Concerts</h3>
          <div class="concerts-grid">
            {{range .Shows}}
            <div class="concert-card">
              <div class="concert-loc">{{.Location}}</div>
              <div class="concert-date">{{.Date}}</div>
            </div>
            {{end}}
          </div>
        </div>

        <div class="youtube-section bloc">
          <h3>Lecteur audio</h3>
          <div id="youtube-container">
            {{if .Videos}} {{range .Videos}}
            <div class="audio-item">
              <img
                class="audio-thumb"
                alt="{{.Title}}"
                src="https://i.ytimg.com/vi/{{.ID}}/hqdefault.jpg"
              />
              <button class="audio-play" aria-label="Lire" data-vid="{{.ID}}">
                ▶
              </button>
              <div class="audio-meta">
                <div class="audio-title" title="{{.Title}}">{{.Title}}</div>
                <div class="audio-bar"><div class="audio-progress"></div></div>
                <div class="audio-controls">
                  <button class="btn-like" data-vid="{{.ID}}" title="J'aime">
                    ❤
                  </button>
                  <button
                    class="btn-add-playlist"
                    data-vid="{{.ID}}"
                    data-title="{{.Title}}"
                    title="Ajouter à la playlist"
                  >
                    +
                  </button>
                </div>
              </div>
              <div class="yt-embed-wrapper" id="yt-wrapper-{{.ID}}">
                <div id="player-{{.ID}}"></div>
              </div>
            </div>
            {{end}} {{else}}
            <p class="texte-gris">Aucune vidéo trouvée.</p>
            {{end}}
          </div>
        </div>
      </section>

      <div class="pied-de-page">Données: groupietrackers.herokuapp.com</div>
    </main>

    <!-- Modal Choix Playlist -->
    <div id="playlist-modal" class="modal hidden">
      <div class="modal-overlay"></div>
      <div class="modal-content">
        <h3>Ajouter à une playlist</h3>
        <div id="playlist-list" class="playlist-list">
          <!-- Playlists injectées ici -->
        </div>
        <div class="buttons-row">
          <button
            id="btn-create-new"
            class="btn btn-secondary"
            style="width: 100%"
          >
            + Nouvelle Playlist
          </button>
          <button id="btn-cancel-playlist" class="btn btn-secondary">
            Annuler
          </button>
        </div>
      </div>
    </div>

    <script src="/js/toast.js?v=2"></script>
    <script src="/js/details.js?v=2" defer></script>
  </body>
</html>
